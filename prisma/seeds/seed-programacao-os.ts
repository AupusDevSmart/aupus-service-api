import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function seedProgramacaoOS() {
  console.log('üå± Iniciando seed de Programa√ß√µes e Ordens de Servi√ßo...');

  // IDs das entidades existentes para usar nos relacionamentos
  const plantas = [
    'cmekb23pr00012f4o4nqp9ypz', // Planta Industrial S√£o Paulo
    'cmekb23xd00032f4o1rw4g8rk', // Centro de Distribui√ß√£o Rio
    'cmekb241300052f4o9frhlfqy', // Unidade Administrativa BH
    'cmekb245400072f4oyfcrcxzw', // Oficina Jo√£o Silva
  ];

  const equipamentos = [
    'cmesudng400012ffkncdeu6nl', // Sistema de Controle Principal
    'cmesudnop00032ffk5ma35abw', // Transformador Principal TR-01
    'cmesudnzl00072ffkkc5uoidk', // Sistema de Refrigera√ß√£o
    'cmesudoh1000f2ffk75yy4lqe', // Compressor de Ar Industrial
    'cmesudo8k000b2ffkp6ufhcax', // Grupo Gerador de Emerg√™ncia
  ];

  const tarefas = [
    'cmfh32n8u00022fxcdqtx5gys', // Inspe√ß√£o Visual dos M√≥dulos
    'cmfh32n8u00032fxc0efgh3e8', // Limpeza e Verifica√ß√£o de Conectores
    'cmfh32n8u00042fxcbg60kl3e', // Calibra√ß√£o de Sensores e Atuadores
    'cmfh32nxt00072fxcs6vdeka9', // An√°lise do √ìleo Isolante
    'cmfh32olx000b2fxcu9nhojky', // Substitui√ß√£o de Filtros
  ];

  const usuarios = [
    { id: '01K2CPBYE07B3HWW0CZHHB3ZCR', nome: 'Administrador' },
    { id: '01K2CPBZ7NZMAA5J9P30GVCYGD', nome: 'Jo√£o Consultor' },
    { id: '01K2CPC019T4NXD6NDT0D4PHHZ', nome: 'Maria Gerente' },
    { id: 'fkl8xxjkwgb2rtnmxxlotewpwf', nome: 'aaaaaaaa' },
  ];

  const veiculos = [
    'cmflluf0w00002fvgjflqbxds', // Carro Teste
    'cmfo9cvba00022f2ogx71huj6', // Golzin
  ];

  // 1. PROGRAMA√á√ïES DE OS
  console.log('üìù Criando programa√ß√µes de OS...');

  const programacoes = [];

  // Programa√ß√£o 1: APROVADA (origem: tarefa)
  const prog1 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-001',
      descricao: 'Manuten√ß√£o Preventiva do Sistema de Controle SIMATIC S7-1500',
      local: 'Sala de Controle - Galp√£o Principal',
      ativo: 'Sistema de Controle Principal',
      condicoes: 'PARADO',
      status: 'APROVADA',
      tipo: 'PREVENTIVA',
      prioridade: 'ALTA',
      origem: 'TAREFA',
      planta_id: plantas[0],
      equipamento_id: equipamentos[0],
      dados_origem: {
        tarefas_ids: [tarefas[0], tarefas[1]],
        plano_manutencao_id: 'cmfh32myo00012fxc86fcw0dj'
      },
      data_previsao_inicio: new Date('2025-10-15'),
      data_previsao_fim: new Date('2025-10-15'),
      tempo_estimado: 4.5,
      duracao_estimada: 4.5,
      necessita_veiculo: true,
      assentos_necessarios: 2,
      carga_necessaria: 50,
      observacoes_veiculo: 'Necess√°rio transporte de equipamentos de calibra√ß√£o',
      data_hora_programada: new Date('2025-10-15T08:00:00'),
      responsavel: 'Jo√£o Consultor',
      responsavel_id: usuarios[1].id,
      time_equipe: 'Equipe El√©trica',
      orcamento_previsto: 2500.00,
      observacoes: 'Manuten√ß√£o cr√≠tica - parada programada necess√°ria',
      observacoes_programacao: 'Coordenar com produ√ß√£o para parada do sistema',
      justificativa: 'Manuten√ß√£o preventiva conforme cronograma',
      criado_por: usuarios[0].nome,
      criado_por_id: usuarios[0].id,
      analisado_por: usuarios[2].nome,
      analisado_por_id: usuarios[2].id,
      data_analise: new Date('2025-09-20'),
      aprovado_por: usuarios[2].nome,
      aprovado_por_id: usuarios[2].id,
      data_aprovacao: new Date('2025-09-22'),
    },
  });
  programacoes.push(prog1);

  // Programa√ß√£o 2: EM_ANALISE (origem: anomalia)
  const prog2 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-002',
      descricao: 'Corre√ß√£o de Vazamento no Sistema de Refrigera√ß√£o',
      local: 'C√¢mara Fria - Armaz√©m 3',
      ativo: 'Sistema de Refrigera√ß√£o',
      condicoes: 'FUNCIONANDO',
      status: 'EM_ANALISE',
      tipo: 'CORRETIVA',
      prioridade: 'CRITICA',
      origem: 'ANOMALIA',
      planta_id: plantas[1],
      equipamento_id: equipamentos[2],
      dados_origem: {
        anomalia_descricao: 'Vazamento detectado na tubula√ß√£o principal',
        anomalia_criticidade: 'ALTA'
      },
      data_previsao_inicio: new Date('2025-10-18'),
      data_previsao_fim: new Date('2025-10-18'),
      tempo_estimado: 6.0,
      duracao_estimada: 8.0,
      necessita_veiculo: true,
      assentos_necessarios: 3,
      carga_necessaria: 100,
      observacoes_veiculo: 'Transporte de soldas e equipamentos pesados',
      orcamento_previsto: 3500.00,
      observacoes: 'Vazamento identificado durante inspe√ß√£o de rotina',
      justificativa: 'Corre√ß√£o urgente para evitar perda de produtos',
      criado_por: usuarios[1].nome,
      criado_por_id: usuarios[1].id,
      analisado_por: usuarios[2].nome,
      analisado_por_id: usuarios[2].id,
      data_analise: new Date('2025-09-25'),
    },
  });
  programacoes.push(prog2);

  // Programa√ß√£o 3: PENDENTE (origem: manual)
  const prog3 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-003',
      descricao: 'Troca de √ìleo e Filtros do Compressor',
      local: '√Årea de Manuten√ß√£o',
      ativo: 'Compressor de Ar Industrial',
      condicoes: 'PARADO',
      status: 'PENDENTE',
      tipo: 'PREVENTIVA',
      prioridade: 'MEDIA',
      origem: 'MANUAL',
      planta_id: plantas[3],
      equipamento_id: equipamentos[3],
      data_previsao_inicio: new Date('2025-10-20'),
      data_previsao_fim: new Date('2025-10-20'),
      tempo_estimado: 3.0,
      duracao_estimada: 4.0,
      necessita_veiculo: false,
      orcamento_previsto: 800.00,
      observacoes: 'Manuten√ß√£o de rotina conforme manual do fabricante',
      justificativa: 'Preven√ß√£o de falhas e aumento da vida √∫til',
      criado_por: usuarios[3].nome,
      criado_por_id: usuarios[3].id,
    },
  });
  programacoes.push(prog3);

  // Programa√ß√£o 4: RASCUNHO (autom√°tica)
  const prog4 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-004',
      descricao: 'Teste de Funcionamento Grupo Gerador',
      local: 'Subsolo - Casa de M√°quinas',
      ativo: 'Grupo Gerador de Emerg√™ncia',
      condicoes: 'FUNCIONANDO',
      status: 'RASCUNHO',
      tipo: 'INSPECAO',
      prioridade: 'MEDIA',
      origem: 'TAREFA',
      planta_id: plantas[2],
      equipamento_id: equipamentos[4],
      dados_origem: {
        tarefa_id: tarefas[4],
        automatico: true
      },
      data_previsao_inicio: new Date('2025-10-25'),
      data_previsao_fim: new Date('2025-10-25'),
      tempo_estimado: 1.0,
      duracao_estimada: 1.5,
      necessita_veiculo: false,
      orcamento_previsto: 200.00,
      observacoes: 'Programa√ß√£o gerada automaticamente pelo sistema',
      criado_por: 'Sistema Autom√°tico',
    },
  });
  programacoes.push(prog4);

  // 2. MATERIAIS DAS PROGRAMA√á√ïES
  console.log('üîß Criando materiais das programa√ß√µes...');

  // Materiais para Programa√ß√£o 1
  await prisma.materiais_programacao_os.createMany({
    data: [
      {
        programacao_id: prog1.id,
        descricao: 'Conector Industrial IP67',
        quantidade_planejada: 4,
        unidade: 'PC',
        custo_unitario: 125.00,
        custo_total: 500.00,
        confirmado: true,
        disponivel: true,
        observacoes: 'Especifica√ß√£o Siemens original'
      },
      {
        programacao_id: prog1.id,
        descricao: 'Cabo Ethernet Cat6 Industrial',
        quantidade_planejada: 50,
        unidade: 'M',
        custo_unitario: 8.50,
        custo_total: 425.00,
        confirmado: true,
        disponivel: true,
      },
      {
        programacao_id: prog1.id,
        descricao: 'Kit Limpeza Eletr√¥nica',
        quantidade_planejada: 2,
        unidade: 'PC',
        custo_unitario: 45.00,
        custo_total: 90.00,
        confirmado: true,
        disponivel: true,
      }
    ]
  });

  // Materiais para Programa√ß√£o 2
  await prisma.materiais_programacao_os.createMany({
    data: [
      {
        programacao_id: prog2.id,
        descricao: 'Tubo de Cobre 1/2"',
        quantidade_planejada: 10,
        unidade: 'M',
        custo_unitario: 25.00,
        custo_total: 250.00,
        confirmado: false,
        disponivel: true,
        observacoes: 'Verificar compatibilidade com sistema existente'
      },
      {
        programacao_id: prog2.id,
        descricao: 'Solda Prata 15%',
        quantidade_planejada: 0.5,
        unidade: 'KG',
        custo_unitario: 180.00,
        custo_total: 90.00,
        confirmado: true,
        disponivel: true,
      },
      {
        programacao_id: prog2.id,
        descricao: 'Isolamento T√©rmico',
        quantidade_planejada: 5,
        unidade: 'M',
        custo_unitario: 35.00,
        custo_total: 175.00,
        confirmado: true,
        disponivel: false,
        observacoes: 'Necess√°rio comprar - prazo 3 dias'
      }
    ]
  });

  // 3. FERRAMENTAS DAS PROGRAMA√á√ïES
  console.log('üõ†Ô∏è Criando ferramentas das programa√ß√µes...');

  await prisma.ferramentas_programacao_os.createMany({
    data: [
      {
        programacao_id: prog1.id,
        descricao: 'Mult√≠metro Digital Fluke 87V',
        quantidade: 1,
        confirmada: true,
        disponivel: true,
      },
      {
        programacao_id: prog1.id,
        descricao: 'Kit Chaves de Fenda Isoladas',
        quantidade: 1,
        confirmada: true,
        disponivel: true,
      },
      {
        programacao_id: prog2.id,
        descricao: 'Ma√ßarico para Solda',
        quantidade: 1,
        confirmada: true,
        disponivel: true,
      },
      {
        programacao_id: prog2.id,
        descricao: 'Detector de Vazamento Eletr√¥nico',
        quantidade: 1,
        confirmada: false,
        disponivel: false,
        observacoes: 'Equipamento em manuten√ß√£o - retorna dia 20'
      }
    ]
  });

  // 4. T√âCNICOS DAS PROGRAMA√á√ïES
  console.log('üë®‚Äçüîß Criando t√©cnicos das programa√ß√µes...');

  await prisma.tecnicos_programacao_os.createMany({
    data: [
      {
        programacao_id: prog1.id,
        nome: 'Carlos Silva',
        especialidade: 'Eletricista Industrial',
        horas_estimadas: 4.5,
        custo_hora: 85.00,
        custo_total: 382.50,
        disponivel: true,
        tecnico_id: usuarios[1].id
      },
      {
        programacao_id: prog1.id,
        nome: 'Ana Santos',
        especialidade: 'Instrumentista',
        horas_estimadas: 4.5,
        custo_hora: 95.00,
        custo_total: 427.50,
        disponivel: true,
      },
      {
        programacao_id: prog2.id,
        nome: 'Pedro Oliveira',
        especialidade: 'T√©cnico em Refrigera√ß√£o',
        horas_estimadas: 8.0,
        custo_hora: 75.00,
        custo_total: 600.00,
        disponivel: true,
      },
      {
        programacao_id: prog2.id,
        nome: 'Jos√© Almeida',
        especialidade: 'Soldador',
        horas_estimadas: 4.0,
        custo_hora: 80.00,
        custo_total: 320.00,
        disponivel: true,
      }
    ]
  });

  // 5. RELACIONAMENTOS TAREFAS-PROGRAMA√á√ÉO
  console.log('üîó Criando relacionamentos tarefas-programa√ß√£o...');

  await prisma.tarefas_programacao_os.createMany({
    data: [
      {
        programacao_id: prog1.id,
        tarefa_id: tarefas[0],
        ordem: 1,
        status: 'PENDENTE',
        observacoes: 'Inspe√ß√£o visual completa dos m√≥dulos'
      },
      {
        programacao_id: prog1.id,
        tarefa_id: tarefas[1],
        ordem: 2,
        status: 'PENDENTE',
        observacoes: 'Limpeza ap√≥s inspe√ß√£o'
      },
      {
        programacao_id: prog4.id,
        tarefa_id: tarefas[4],
        ordem: 1,
        status: 'PENDENTE',
        observacoes: 'Tarefa autom√°tica do sistema'
      }
    ]
  });

  // 6. HIST√ìRICO DAS PROGRAMA√á√ïES
  console.log('üìã Criando hist√≥rico das programa√ß√µes...');

  await prisma.historico_programacao_os.createMany({
    data: [
      {
        programacao_id: prog1.id,
        acao: 'Programa√ß√£o criada',
        usuario: usuarios[0].nome,
        usuario_id: usuarios[0].id,
        status_anterior: null,
        status_novo: 'PENDENTE',
        observacoes: 'Programa√ß√£o criada com base na tarefa de manuten√ß√£o preventiva'
      },
      {
        programacao_id: prog1.id,
        acao: 'Programa√ß√£o analisada',
        usuario: usuarios[2].nome,
        usuario_id: usuarios[2].id,
        status_anterior: 'PENDENTE',
        status_novo: 'EM_ANALISE',
        observacoes: 'An√°lise t√©cnica realizada - recursos confirmados'
      },
      {
        programacao_id: prog1.id,
        acao: 'Programa√ß√£o aprovada',
        usuario: usuarios[2].nome,
        usuario_id: usuarios[2].id,
        status_anterior: 'EM_ANALISE',
        status_novo: 'APROVADA',
        observacoes: 'Programa√ß√£o aprovada - pode gerar OS'
      }
    ]
  });

  // 7. ORDEM DE SERVI√áO (gerada da programa√ß√£o aprovada)
  console.log('üìÑ Criando ordem de servi√ßo...');

  const os1 = await prisma.ordens_servico.create({
    data: {
      programacao_id: prog1.id,
      numero_os: 'OS-2025-001',
      descricao: prog1.descricao,
      local: prog1.local,
      ativo: prog1.ativo,
      condicoes: prog1.condicoes,
      status: 'PROGRAMADA',
      tipo: prog1.tipo,
      prioridade: prog1.prioridade,
      origem: prog1.origem,
      planta_id: prog1.planta_id,
      equipamento_id: prog1.equipamento_id,
      dados_origem: prog1.dados_origem,
      tempo_estimado: prog1.tempo_estimado,
      duracao_estimada: prog1.duracao_estimada,
      data_hora_programada: prog1.data_hora_programada!,
      responsavel: prog1.responsavel!,
      responsavel_id: prog1.responsavel_id,
      time_equipe: prog1.time_equipe,
      orcamento_previsto: prog1.orcamento_previsto,
      observacoes: prog1.observacoes,
      observacoes_programacao: 'OS gerada automaticamente da programa√ß√£o aprovada',
      criado_por: 'Sistema',
      criado_por_id: usuarios[0].id,
      programado_por: usuarios[2].nome,
      programado_por_id: usuarios[2].id,
    },
  });

  // 8. MATERIAIS DA OS (copiados da programa√ß√£o)
  console.log('üîß Criando materiais da OS...');

  await prisma.materiais_os.createMany({
    data: [
      {
        os_id: os1.id,
        descricao: 'Conector Industrial IP67',
        quantidade_planejada: 4,
        quantidade_consumida: null, // Ser√° preenchido na execu√ß√£o
        unidade: 'PC',
        custo_unitario: 125.00,
        custo_total: 500.00,
        confirmado: true,
        disponivel: true,
      },
      {
        os_id: os1.id,
        descricao: 'Cabo Ethernet Cat6 Industrial',
        quantidade_planejada: 50,
        quantidade_consumida: null,
        unidade: 'M',
        custo_unitario: 8.50,
        custo_total: 425.00,
        confirmado: true,
        disponivel: true,
      },
      {
        os_id: os1.id,
        descricao: 'Kit Limpeza Eletr√¥nica',
        quantidade_planejada: 2,
        quantidade_consumida: null,
        unidade: 'PC',
        custo_unitario: 45.00,
        custo_total: 90.00,
        confirmado: true,
        disponivel: true,
      }
    ]
  });

  // 9. FERRAMENTAS DA OS
  console.log('üõ†Ô∏è Criando ferramentas da OS...');

  await prisma.ferramentas_os.createMany({
    data: [
      {
        os_id: os1.id,
        descricao: 'Mult√≠metro Digital Fluke 87V',
        quantidade: 1,
        confirmada: true,
        disponivel: true,
        utilizada: false,
        condicao_antes: 'BOM',
      },
      {
        os_id: os1.id,
        descricao: 'Kit Chaves de Fenda Isoladas',
        quantidade: 1,
        confirmada: true,
        disponivel: true,
        utilizada: false,
        condicao_antes: 'BOM',
      }
    ]
  });

  // 10. T√âCNICOS DA OS
  console.log('üë®‚Äçüîß Criando t√©cnicos da OS...');

  await prisma.tecnicos_os.createMany({
    data: [
      {
        os_id: os1.id,
        nome: 'Carlos Silva',
        especialidade: 'Eletricista Industrial',
        horas_estimadas: 4.5,
        horas_trabalhadas: null, // Ser√° preenchido durante execu√ß√£o
        custo_hora: 85.00,
        custo_total: 382.50,
        disponivel: true,
        presente: false,
        tecnico_id: usuarios[1].id
      },
      {
        os_id: os1.id,
        nome: 'Ana Santos',
        especialidade: 'Instrumentista',
        horas_estimadas: 4.5,
        horas_trabalhadas: null,
        custo_hora: 95.00,
        custo_total: 427.50,
        disponivel: true,
        presente: false,
      }
    ]
  });

  // 11. CHECKLIST DE ATIVIDADES
  console.log('‚úÖ Criando checklist de atividades...');

  await prisma.checklist_atividades_os.createMany({
    data: [
      {
        os_id: os1.id,
        atividade: 'Desligar sistema e isolar energia',
        ordem: 1,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 15,
        observacoes: 'Procedimento de seguran√ßa obrigat√≥rio'
      },
      {
        os_id: os1.id,
        atividade: 'Inspe√ß√£o visual dos m√≥dulos',
        ordem: 2,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 60,
      },
      {
        os_id: os1.id,
        atividade: 'Limpeza dos conectores',
        ordem: 3,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 90,
      },
      {
        os_id: os1.id,
        atividade: 'Verifica√ß√£o de LEDs de status',
        ordem: 4,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 30,
      },
      {
        os_id: os1.id,
        atividade: 'Teste de funcionamento',
        ordem: 5,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 45,
      },
      {
        os_id: os1.id,
        atividade: 'Documentar resultados',
        ordem: 6,
        concluida: false,
        obrigatoria: true,
        tempo_estimado: 30,
      }
    ]
  });

  // 12. RELACIONAMENTOS TAREFAS-OS
  console.log('üîó Criando relacionamentos tarefas-OS...');

  await prisma.tarefas_os.createMany({
    data: [
      {
        os_id: os1.id,
        tarefa_id: tarefas[0],
        ordem: 1,
        status: 'PENDENTE',
        observacoes: 'Inspe√ß√£o visual completa dos m√≥dulos'
      },
      {
        os_id: os1.id,
        tarefa_id: tarefas[1],
        ordem: 2,
        status: 'PENDENTE',
        observacoes: 'Limpeza ap√≥s inspe√ß√£o'
      }
    ]
  });

  // 13. HIST√ìRICO DA OS
  console.log('üìã Criando hist√≥rico da OS...');

  await prisma.historico_os.createMany({
    data: [
      {
        os_id: os1.id,
        acao: 'OS criada automaticamente',
        usuario: 'Sistema',
        usuario_id: usuarios[0].id,
        status_anterior: null,
        status_novo: 'PLANEJADA',
        observacoes: 'OS gerada a partir da programa√ß√£o aprovada PRG-2025-001'
      },
      {
        os_id: os1.id,
        acao: 'OS programada com recursos',
        usuario: usuarios[2].nome,
        usuario_id: usuarios[2].id,
        status_anterior: 'PLANEJADA',
        status_novo: 'PROGRAMADA',
        observacoes: 'Recursos confirmados e data programada definida'
      }
    ]
  });

  // 14. RESERVA DE VE√çCULO - Temporariamente comentado
  console.log('üöó Pulando reserva de ve√≠culo...');

  /*
  await prisma.reserva_veiculo.create({
    data: {
      veiculo_id: veiculos[0],
      solicitante_id: os1.id,
      tipo_solicitante: 'ordem_servico',
      data_inicio: new Date('2025-10-15T07:30:00'),
      hora_fim: '13:00',
      responsavel: os1.responsavel,
      responsavel_id: os1.responsavel_id,
      finalidade: `Execu√ß√£o da OS ${os1.numero_os} - ${os1.descricao}`,
      status: 'ativa',
      observacoes: 'Transporte de t√©cnicos e equipamentos para manuten√ß√£o'
    }
  });
  */

  // 15. CRIANDO MAIS PROGRAMA√á√ïES PARA DIVERSIDADE
  console.log('üìù Criando programa√ß√µes adicionais...');

  // Programa√ß√£o REJEITADA
  const prog5 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-005',
      descricao: 'Amplia√ß√£o Sistema El√©trico',
      local: 'Painel Principal',
      ativo: 'Sistema de Controle Principal',
      condicoes: 'PARADO',
      status: 'REJEITADA',
      tipo: 'PREVENTIVA',
      prioridade: 'BAIXA',
      origem: 'MANUAL',
      planta_id: plantas[0],
      equipamento_id: equipamentos[0],
      data_previsao_inicio: new Date('2025-11-01'),
      data_previsao_fim: new Date('2025-11-02'),
      tempo_estimado: 16.0,
      duracao_estimada: 18.0,
      necessita_veiculo: true,
      assentos_necessarios: 4,
      carga_necessaria: 200,
      orcamento_previsto: 15000.00,
      observacoes: 'Amplia√ß√£o n√£o autorizada no momento',
      motivo_rejeicao: 'Or√ßamento excede limite aprovado para o per√≠odo',
      criado_por: usuarios[1].nome,
      criado_por_id: usuarios[1].id,
      analisado_por: usuarios[2].nome,
      analisado_por_id: usuarios[2].id,
      data_analise: new Date('2025-09-28'),
    },
  });

  // OS EM EXECU√á√ÉO
  const prog6 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-006',
      descricao: 'Calibra√ß√£o Instrumentos Transformador',
      local: 'Subesta√ß√£o - √Årea Externa',
      ativo: 'Transformador Principal TR-01',
      condicoes: 'FUNCIONANDO',
      status: 'APROVADA',
      tipo: 'PREDITIVA',
      prioridade: 'ALTA',
      origem: 'TAREFA',
      planta_id: plantas[0],
      equipamento_id: equipamentos[1],
      dados_origem: {
        tarefa_id: tarefas[3],
        plano_manutencao_id: 'cmfh32npp00062fxcf87uh2n2'
      },
      data_previsao_inicio: new Date('2025-09-30'),
      data_previsao_fim: new Date('2025-09-30'),
      tempo_estimado: 2.0,
      duracao_estimada: 2.5,
      necessita_veiculo: false,
      data_hora_programada: new Date('2025-09-30T14:00:00'),
      responsavel: 'Pedro Oliveira',
      time_equipe: 'Equipe Instrumenta√ß√£o',
      orcamento_previsto: 1200.00,
      observacoes: 'Calibra√ß√£o semestral obrigat√≥ria',
      criado_por: 'Sistema Autom√°tico',
      analisado_por: usuarios[2].nome,
      analisado_por_id: usuarios[2].id,
      data_analise: new Date('2025-09-28'),
      aprovado_por: usuarios[2].nome,
      aprovado_por_id: usuarios[2].id,
      data_aprovacao: new Date('2025-09-28'),
    },
  });

  const os2 = await prisma.ordens_servico.create({
    data: {
      programacao_id: prog6.id,
      numero_os: 'OS-2025-002',
      descricao: prog6.descricao,
      local: prog6.local,
      ativo: prog6.ativo,
      condicoes: prog6.condicoes,
      status: 'EM_EXECUCAO',
      tipo: prog6.tipo,
      prioridade: prog6.prioridade,
      origem: prog6.origem,
      planta_id: prog6.planta_id,
      equipamento_id: prog6.equipamento_id,
      dados_origem: prog6.dados_origem,
      tempo_estimado: prog6.tempo_estimado,
      duracao_estimada: prog6.duracao_estimada,
      data_hora_programada: prog6.data_hora_programada!,
      responsavel: prog6.responsavel!,
      time_equipe: prog6.time_equipe,
      data_hora_inicio_real: new Date('2025-09-30T14:05:00'),
      equipe_presente: ['Pedro Oliveira', 'Ana Santos'],
      orcamento_previsto: prog6.orcamento_previsto,
      observacoes: prog6.observacoes,
      observacoes_execucao: 'Execu√ß√£o iniciada conforme planejado',
      criado_por: 'Sistema',
      criado_por_id: usuarios[0].id,
      programado_por: usuarios[2].nome,
      programado_por_id: usuarios[2].id,
    },
  });

  // Registro de tempo para OS em execu√ß√£o
  await prisma.registros_tempo_os.create({
    data: {
      os_id: os2.id,
      tecnico_id: usuarios[1].id,
      tecnico_nome: 'Pedro Oliveira',
      data_hora_inicio: new Date('2025-09-30T14:05:00'),
      atividade: 'Prepara√ß√£o e setup dos equipamentos',
      observacoes: 'Inicio da calibra√ß√£o conforme cronograma',
      pausas: []
    }
  });

  // OS FINALIZADA
  const prog7 = await prisma.programacoes_os.create({
    data: {
      codigo: 'PRG-2025-007',
      descricao: 'Limpeza Filtros Sistema Refrigera√ß√£o',
      local: 'C√¢mara Fria - Armaz√©m 3',
      ativo: 'Sistema de Refrigera√ß√£o',
      condicoes: 'PARADO',
      status: 'APROVADA',
      tipo: 'PREVENTIVA',
      prioridade: 'MEDIA',
      origem: 'TAREFA',
      planta_id: plantas[1],
      equipamento_id: equipamentos[2],
      dados_origem: {
        tarefa_id: tarefas[2]
      },
      data_previsao_inicio: new Date('2025-09-25'),
      data_previsao_fim: new Date('2025-09-25'),
      tempo_estimado: 1.5,
      duracao_estimada: 2.0,
      necessita_veiculo: false,
      data_hora_programada: new Date('2025-09-25T09:00:00'),
      responsavel: 'Jos√© Almeida',
      orcamento_previsto: 300.00,
      observacoes: 'Manuten√ß√£o preventiva mensal',
      criado_por: 'Sistema Autom√°tico',
      aprovado_por: usuarios[2].nome,
      aprovado_por_id: usuarios[2].id,
      data_aprovacao: new Date('2025-09-20'),
    },
  });

  const os3 = await prisma.ordens_servico.create({
    data: {
      programacao_id: prog7.id,
      numero_os: 'OS-2025-003',
      descricao: prog7.descricao,
      local: prog7.local,
      ativo: prog7.ativo,
      condicoes: prog7.condicoes,
      status: 'FINALIZADA',
      tipo: prog7.tipo,
      prioridade: prog7.prioridade,
      origem: prog7.origem,
      planta_id: prog7.planta_id,
      equipamento_id: prog7.equipamento_id,
      tempo_estimado: prog7.tempo_estimado,
      duracao_estimada: prog7.duracao_estimada,
      data_hora_programada: prog7.data_hora_programada!,
      responsavel: prog7.responsavel!,
      data_hora_inicio_real: new Date('2025-09-25T09:00:00'),
      data_hora_fim_real: new Date('2025-09-25T10:30:00'),
      // tempo_real_execucao: 90, // 1h30min - campo removido
      equipe_presente: ['Jos√© Almeida'],
      orcamento_previsto: 300.00,
      custo_real: 275.00,
      observacoes: prog7.observacoes,
      observacoes_execucao: 'Filtros substitu√≠dos conforme programado',
      resultado_servico: 'Todos os filtros foram substitu√≠dos. Sistema funcionando perfeitamente.',
      avaliacao_qualidade: 5,
      observacoes_qualidade: 'Excelente execu√ß√£o, dentro do prazo',
      finalizado_por: 'Jos√© Almeida',
      finalizado_por_id: usuarios[3].id,
    },
  });

  console.log('‚úÖ Seed conclu√≠do com sucesso!');
  console.log(`üìä Estat√≠sticas criadas:`);
  console.log(`   ‚Ä¢ ${programacoes.length + 4} Programa√ß√µes de OS`);
  console.log(`   ‚Ä¢ 3 Ordens de Servi√ßo`);
  console.log(`   ‚Ä¢ Materiais, ferramentas e t√©cnicos associados`);
  console.log(`   ‚Ä¢ Checklists e hist√≥ricos completos`);
  console.log(`   ‚Ä¢ 1 Reserva de ve√≠culo`);

  return {
    programacoes: programacoes.length + 4,
    ordens_servico: 3,
    status: 'success'
  };
}

async function main() {
  try {
    await seedProgramacaoOS();
  } catch (error) {
    console.error('‚ùå Erro durante o seed:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  });