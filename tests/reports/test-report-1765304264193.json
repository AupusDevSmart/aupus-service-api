{
  "timestamp": "2025-12-09T18:17:44.192Z",
  "summary": {
    "totalTests": 27,
    "totalPassed": 7,
    "totalFailed": 19,
    "totalWarned": 1,
    "successRate": "25.93%",
    "duration": 19311
  },
  "phases": [
    {
      "phase": "FASE 1: Infraestrutura",
      "passed": 5,
      "failed": 0,
      "warned": 1,
      "total": 6,
      "duration": 3309
    },
    {
      "phase": "FASE 2: CRUD de Usuários",
      "passed": 0,
      "failed": 7,
      "warned": 0,
      "total": 7,
      "duration": 11104
    },
    {
      "phase": "FASE 3: Autenticação",
      "passed": 2,
      "failed": 4,
      "warned": 0,
      "total": 6,
      "duration": 314
    },
    {
      "phase": "FASE 4: Roles e Permissions",
      "passed": 0,
      "failed": 8,
      "warned": 0,
      "total": 8,
      "duration": 4583
    }
  ],
  "failures": [
    {
      "phase": "CRUD",
      "test": "Criar Usuário Simples",
      "message": "Resposta inesperada ao criar usuário"
    },
    {
      "phase": "CRUD",
      "test": "Criar Usuário com RoleId",
      "message": "Erro: Cannot read properties of undefined (reading 'id')"
    },
    {
      "phase": "CRUD",
      "test": "Criar Usuário com PermissionIds",
      "message": "Erro: Request failed with status code 404"
    },
    {
      "phase": "CRUD",
      "test": "Listar Usuários",
      "message": "Formato de resposta inesperado"
    },
    {
      "phase": "CRUD",
      "test": "Buscar Usuário por ID",
      "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
    },
    {
      "phase": "CRUD",
      "test": "Atualizar Usuário",
      "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
    },
    {
      "phase": "CRUD",
      "test": "Deletar Usuário",
      "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
    },
    {
      "phase": "Autenticação",
      "test": "Login com Credenciais Válidas",
      "message": "Erro: Request failed with status code 401"
    },
    {
      "phase": "Autenticação",
      "test": "Payload do JWT",
      "message": "Teste pulado: nenhum token disponível do TEST 14"
    },
    {
      "phase": "Autenticação",
      "test": "Refresh Token",
      "message": "Teste pulado: nenhum refresh token disponível do TEST 14"
    },
    {
      "phase": "Autenticação",
      "test": "Rota Protegida com Token Válido",
      "message": "Teste pulado: nenhum token disponível"
    },
    {
      "phase": "Permissions",
      "test": "Atribuir Role",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Atribuir Permissão Direta",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Remover Permissão Direta",
      "message": "Teste pulado: usuário ou permission não disponível"
    },
    {
      "phase": "Permissions",
      "test": "Sincronizar Permissões",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Buscar Permissões do Usuário",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Verificar Permissão Específica",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Verificar Múltiplas Permissões",
      "message": "Teste pulado: usuário de teste não foi criado"
    },
    {
      "phase": "Permissions",
      "test": "Categorização de Permissões",
      "message": "Teste pulado: usuário de teste não foi criado"
    }
  ],
  "allResults": [
    {
      "phase": "FASE 1: Infraestrutura",
      "results": [
        {
          "test": "Existência de Tabelas",
          "status": "PASS",
          "message": "Todas as 6 tabelas necessárias existem",
          "data": [
            "model_has_permissions",
            "model_has_roles",
            "permissions",
            "role_has_permissions",
            "roles",
            "usuarios"
          ]
        },
        {
          "test": "Constraint da Coluna Role",
          "status": "WARN",
          "message": "Constraint existe mas não foi possível extrair valores",
          "data": {
            "conname": "usuarios_role_check",
            "constraint_def": "CHECK (((role)::text = ANY (ARRAY[('admin'::character varying)::text, ('consultor'::character varying)::text, ('gerente'::character varying)::text, ('vendedor'::character varying)::text])))"
          }
        },
        {
          "test": "Índices de Performance",
          "status": "PASS",
          "message": "2 índices encontrados",
          "data": [
            {
              "tablename": "model_has_permissions",
              "indexname": "model_has_permissions_model_id_model_type_index"
            },
            {
              "tablename": "model_has_roles",
              "indexname": "model_has_roles_model_id_model_type_index"
            }
          ]
        },
        {
          "test": "Roles Cadastradas",
          "status": "PASS",
          "message": "9 roles encontradas no sistema",
          "data": [
            {
              "id": 1,
              "name": "super_admin",
              "guard_name": "api"
            },
            {
              "id": 2,
              "name": "admin",
              "guard_name": "api"
            },
            {
              "id": 3,
              "name": "cativo",
              "guard_name": "api"
            },
            {
              "id": 4,
              "name": "corretor",
              "guard_name": "api"
            },
            {
              "id": 5,
              "name": "associado",
              "guard_name": "api"
            },
            {
              "id": 6,
              "name": "proprietario",
              "guard_name": "api"
            },
            {
              "id": 7,
              "name": "gerente",
              "guard_name": "api"
            },
            {
              "id": 8,
              "name": "vendedor",
              "guard_name": "api"
            },
            {
              "id": 9,
              "name": "consultor",
              "guard_name": "api"
            }
          ]
        },
        {
          "test": "Permissions Cadastradas",
          "status": "PASS",
          "message": "126 permissions encontradas (94 modernas)",
          "data": {
            "total": 126,
            "modern": 94,
            "sample": [
              {
                "id": 1,
                "name": "PainelGeral"
              },
              {
                "id": 2,
                "name": "PainelGeralOrganizacoes"
              },
              {
                "id": 3,
                "name": "PainelGeralCativos"
              },
              {
                "id": 4,
                "name": "PainelGeralClube"
              },
              {
                "id": 5,
                "name": "MonitoramentoOrganizacoes"
              },
              {
                "id": 6,
                "name": "Monitoramento"
              },
              {
                "id": 7,
                "name": "NET"
              },
              {
                "id": 8,
                "name": "CRM"
              },
              {
                "id": 9,
                "name": "Oportunidades"
              },
              {
                "id": 10,
                "name": "Usuarios"
              }
            ]
          }
        },
        {
          "test": "Relacionamento Roles-Permissions",
          "status": "PASS",
          "message": "6 roles têm permissions associadas",
          "data": {
            "rolesWithPermissions": 6
          }
        }
      ]
    },
    {
      "phase": "FASE 2: CRUD de Usuários",
      "results": [
        {
          "test": "Criar Usuário Simples",
          "status": "FAIL",
          "message": "Resposta inesperada ao criar usuário",
          "data": {
            "success": true,
            "data": {
              "id": "0czhg392pxgbxirjxlx646b79b",
              "status": "Ativo",
              "concessionaria_atual_id": null,
              "organizacao_atual": null,
              "nome": "Usuário Teste Simples",
              "email": "teste.simples.1765304251640@teste.com",
              "telefone": "11999999999",
              "instagram": null,
              "cpf_cnpj": null,
              "cidade": null,
              "estado": null,
              "endereco": null,
              "cep": null,
              "manager_id": null,
              "avatar_url": null,
              "all_permissions": [],
              "roles": [],
              "created_at": null,
              "updated_at": null,
              "senhaTemporaria": "Aupus123!",
              "primeiroAcesso": true
            },
            "meta": {
              "timestamp": "2025-12-09T18:17:32.641Z",
              "requestId": "84a8943e-6834-480d-938c-a3249fb3c6a7"
            }
          }
        },
        {
          "test": "Criar Usuário com RoleId",
          "status": "FAIL",
          "message": "Erro: Cannot read properties of undefined (reading 'id')"
        },
        {
          "test": "Criar Usuário com PermissionIds",
          "status": "FAIL",
          "message": "Erro: Request failed with status code 404",
          "data": {
            "success": false,
            "error": {
              "code": "NOT_FOUND",
              "message": "Usuário não encontrado"
            },
            "meta": {
              "timestamp": "2025-12-09T18:17:37.499Z",
              "requestId": "0d202de7-3b72-4ffa-9648-f78e439bb4d5"
            }
          }
        },
        {
          "test": "Listar Usuários",
          "status": "FAIL",
          "message": "Formato de resposta inesperado",
          "data": {
            "success": true,
            "data": {
              "data": [
                {
                  "id": "hh67nmg1zr4077ntvy5jaii7n1",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "OLI ANTONIO FIORESE",
                  "email": "teste.usuario2@example.com",
                  "telefone": "(11) 99999-9999",
                  "instagram": null,
                  "cpf_cnpj": null,
                  "cidade": null,
                  "estado": null,
                  "endereco": null,
                  "cep": null,
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "vendedor",
                  "all_permissions": [],
                  "roles": [
                    "vendedor"
                  ],
                  "created_at": null,
                  "updated_at": "2025-10-02T10:50:55.000Z"
                },
                {
                  "id": "0czhg392pxgbxirjxlx646b79b",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Usuário Teste Simples",
                  "email": "teste.simples.1765304251640@teste.com",
                  "telefone": "11999999999",
                  "instagram": null,
                  "cpf_cnpj": null,
                  "cidade": null,
                  "estado": null,
                  "endereco": null,
                  "cep": null,
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "vendedor",
                  "all_permissions": [],
                  "roles": [
                    "vendedor"
                  ],
                  "created_at": null,
                  "updated_at": null
                },
                {
                  "id": "k6g72ojagrl415bsak6y68qi96",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Admin",
                  "email": "admin@email.com",
                  "telefone": null,
                  "instagram": null,
                  "cpf_cnpj": null,
                  "cidade": null,
                  "estado": null,
                  "endereco": null,
                  "cep": null,
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "vendedor",
                  "all_permissions": [],
                  "roles": [
                    "vendedor"
                  ],
                  "created_at": null,
                  "updated_at": "2025-12-08T20:24:29.000Z"
                },
                {
                  "id": "ppkh5pl3o8d974is9z00x4bxzl",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Henrique Gustavo Fiorese",
                  "email": "fazenda.fiorese@gmail.com",
                  "telefone": "6199859091",
                  "instagram": null,
                  "cpf_cnpj": "01762674173",
                  "cidade": null,
                  "estado": null,
                  "endereco": "Avenida Brasília - Formosinha",
                  "cep": "73813-01",
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "gerente",
                  "all_permissions": [],
                  "roles": [
                    "gerente"
                  ],
                  "created_at": null,
                  "updated_at": "2025-11-24T18:40:37.000Z"
                },
                {
                  "id": "4awdsdmo1jeu9p4jms99ayxnj4",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Teste Vendedor",
                  "email": "teste.vendedor@example.com",
                  "telefone": "(11) 99999-9999",
                  "instagram": null,
                  "cpf_cnpj": null,
                  "cidade": null,
                  "estado": null,
                  "endereco": null,
                  "cep": null,
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "vendedor",
                  "all_permissions": [],
                  "roles": [
                    "vendedor"
                  ],
                  "created_at": null,
                  "updated_at": "2025-08-18T20:27:02.000Z"
                },
                {
                  "id": "46s3jvitajhy00b67esqrie2jr",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Pedro Jubran Lunardelli",
                  "email": "pjlunardelli@hotmail.com",
                  "telefone": "+5511942229875",
                  "instagram": null,
                  "cpf_cnpj": "48934943840",
                  "cidade": null,
                  "estado": null,
                  "endereco": "Rua 16 A, CEP: 74075-15",
                  "cep": "74075-15",
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "gerente",
                  "all_permissions": [],
                  "roles": [
                    "gerente"
                  ],
                  "created_at": null,
                  "updated_at": "2025-12-02T21:30:59.000Z"
                },
                {
                  "id": "3tp6gd6hmhyw0cf0mbf0cvi54v",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Teste Admin",
                  "email": "teste.admin2@example.com",
                  "telefone": "(11) 99999-9999",
                  "instagram": null,
                  "cpf_cnpj": null,
                  "cidade": null,
                  "estado": null,
                  "endereco": null,
                  "cep": null,
                  "manager_id": null,
                  "avatar_url": null,
                  "role": "admin",
                  "all_permissions": [],
                  "roles": [
                    "admin"
                  ],
                  "created_at": null,
                  "updated_at": "2025-08-18T20:16:56.000Z"
                },
                {
                  "id": "01K464Z69MJNFW96G06VQX9BA6",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "testeserg",
                  "email": "sergio@aupus",
                  "telefone": "4564",
                  "instagram": null,
                  "cpf_cnpj": "454",
                  "cidade": "54",
                  "estado": "64",
                  "endereco": "6",
                  "cep": "45",
                  "manager_id": "01K2CPBYE07B3HWW0CZHHB3ZCR",
                  "avatar_url": null,
                  "role": "consultor",
                  "all_permissions": [],
                  "roles": [
                    "consultor"
                  ],
                  "created_at": "2025-09-02T21:22:47.000Z",
                  "updated_at": "2025-09-02T21:22:47.000Z"
                },
                {
                  "id": "01K4617DFSCEKBZ7GF07R5YA19",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "Arthur Faggin Barros",
                  "email": "arthurfaggin@gmail.com",
                  "telefone": "62996359774",
                  "instagram": null,
                  "cpf_cnpj": "05189552144",
                  "cidade": "Goiânia",
                  "estado": "GO",
                  "endereco": "Rua 32, nº 915, Residencial Paço das Artes, Apto 703-A",
                  "cep": "74805350",
                  "manager_id": "01K2CPBYE07B3HWW0CZHHB3ZCR",
                  "avatar_url": null,
                  "role": "consultor",
                  "all_permissions": [],
                  "roles": [
                    "consultor"
                  ],
                  "created_at": "2025-09-02T20:17:22.000Z",
                  "updated_at": "2025-09-02T21:08:40.000Z"
                },
                {
                  "id": "01K460BN60FY859R0ZBZ6QW51E",
                  "status": "Ativo",
                  "concessionaria_atual_id": null,
                  "organizacao_atual": null,
                  "nome": "JOANA DARC D FAGGIN",
                  "email": "joicymar@celgpar.com",
                  "telefone": "5435345",
                  "instagram": null,
                  "cpf_cnpj": "5435453",
                  "cidade": "Goiânia",
                  "estado": "GO",
                  "endereco": "Rua 32 , Jardim Goiás , Res. Paço Das Artes",
                  "cep": "74805358",
                  "manager_id": "01K2CPBYE07B3HWW0CZHHB3ZCR",
                  "avatar_url": null,
                  "role": "consultor",
                  "all_permissions": [],
                  "roles": [
                    "consultor"
                  ],
                  "created_at": "2025-09-02T20:02:12.000Z",
                  "updated_at": "2025-09-02T20:02:12.000Z"
                }
              ],
              "pagination": {
                "page": 1,
                "limit": 10,
                "total": 31,
                "totalPages": 4
              }
            },
            "meta": {
              "timestamp": "2025-12-09T18:17:38.708Z",
              "requestId": "4bf6b3c0-df7f-4758-817f-d05f289a0d98"
            }
          }
        },
        {
          "test": "Buscar Usuário por ID",
          "status": "FAIL",
          "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
        },
        {
          "test": "Atualizar Usuário",
          "status": "FAIL",
          "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
        },
        {
          "test": "Deletar Usuário",
          "status": "FAIL",
          "message": "Teste pulado: nenhum usuário foi criado no TEST 7"
        }
      ]
    },
    {
      "phase": "FASE 3: Autenticação",
      "results": [
        {
          "test": "Login com Credenciais Válidas",
          "status": "FAIL",
          "message": "Erro: Request failed with status code 401",
          "data": {
            "success": false,
            "error": {
              "code": "UNAUTHORIZED",
              "message": "Email ou senha inválidos"
            },
            "meta": {
              "timestamp": "2025-12-09T18:17:39.448Z",
              "requestId": "0569a2dd-e63c-4530-8381-e9a20a563682"
            }
          }
        },
        {
          "test": "Login com Credenciais Inválidas",
          "status": "PASS",
          "message": "Login rejeitado corretamente (401/400)",
          "data": {
            "status": 401
          }
        },
        {
          "test": "Payload do JWT",
          "status": "FAIL",
          "message": "Teste pulado: nenhum token disponível do TEST 14"
        },
        {
          "test": "Refresh Token",
          "status": "FAIL",
          "message": "Teste pulado: nenhum refresh token disponível do TEST 14"
        },
        {
          "test": "Rota Protegida com Token Válido",
          "status": "FAIL",
          "message": "Teste pulado: nenhum token disponível"
        },
        {
          "test": "Rota Protegida sem Token",
          "status": "PASS",
          "message": "Acesso bloqueado corretamente (401 Unauthorized)",
          "data": {
            "status": 401
          }
        }
      ]
    },
    {
      "phase": "FASE 4: Roles e Permissions",
      "results": [
        {
          "test": "Atribuir Role",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Atribuir Permissão Direta",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Remover Permissão Direta",
          "status": "FAIL",
          "message": "Teste pulado: usuário ou permission não disponível"
        },
        {
          "test": "Sincronizar Permissões",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Buscar Permissões do Usuário",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Verificar Permissão Específica",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Verificar Múltiplas Permissões",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        },
        {
          "test": "Categorização de Permissões",
          "status": "FAIL",
          "message": "Teste pulado: usuário de teste não foi criado"
        }
      ]
    }
  ]
}